# Travic-CI-Config file for authLdap
#
language: php

addons:
  apt:
    packages:
    - slapd
    - ldap-utils

php:
  - 7.2
  - 7.3
  - 7.4
  - 8.0
  - nightly

stages:
  - check
  - test

jobs:
  fast_finish: true
  include:
  - stage: check
    php:  7.4
    script: ./vendor/bin/phpcs --standard=PSR2 ldap.php authLdap.php src/ tests/
    before_script:
    - composer self-update
    - composer update --prefer-source
    after_script: skip
  - stage: test
  allow_failures:
  - php: nightly
  - php: 8.0

before_script:
 - ./.travis.install.sh
 - phpenv config-add .ci/php.ini || return 0
 - .ci/OpenLDAP_run.sh
 - .ci/load_fixtures.sh
 - composer dumpautoload

script:
- ./vendor/bin/phpunit --configuration=phpunit.travis.xml

after_script:
- ./.travis.after.sh

